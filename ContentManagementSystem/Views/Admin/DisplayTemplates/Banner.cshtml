@using ContentManagementSystem.Framework.Models.HomePage.ContentTypes;
@model Banner

@{
    string carouselId = "section_" + Guid.NewGuid().ToString().Substring( 0, 8 );
}
<div id="@carouselId" class="carousel">
    <div class="carousel-inner" style="left: 0%;">
        @foreach ( var bannerItem in Model.Slides )
        {
            <div class="carousel-item">
                @If( bannerItem.PageId.HasValue, "<a href=\"" + bannerItem.PageUrl + "\">" )
                <img src="@bannerItem.ImgUrl" />
                @If( bannerItem.PageId.HasValue, "</a>" )
            </div>
        }
    </div>
</div>

<script>
    $( function ()
    {
        var bannerAdmin = new apollyon.Banner( @Html.Raw( "$( \"#" + carouselId + "\" ), { bannerType: apollyon.BannerType." + Model.BannerType.ToString() + ", width: \"" + Model.Width + "\", height: \"" + Model.Height + "\", timer: " + ( Model.CycleTimer ?? 0 ) + " }" ) );

        $( "#cancelBannerEditor" ).on( "click", function ()
        {
            $( this ).closest( ".modal-content" ).parent().bgmodal( "close" );
        } );
    } );
</script>