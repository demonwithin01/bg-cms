<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@PageTitle</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />
        @Styles.Render( "~/Content/css" )
        @Scripts.Render( "~/bundles/modernizr" )
        @Scripts.Render( "~/bundles/jquery" )
        @Scripts.Render( "~/bundles/jqueryval" )
        @Scripts.Render( "~/bundles/site" )
    </head>
    <body>
        <img class="page-background" src="/Images/Backgrounds/background.png" />
        <header class="always-open">
            <nav>
                <div class="nav-content">
                    @if ( UserSession.Current.IsLoggedIn )
                    {
                        using ( Html.BeginForm( "LogOff", "Account", new { Area = "Home" } ) )
                        {
                            @Html.AntiForgeryToken()
                            <span onclick="$(this).parent().submit();" class="logged-in-button">
                                <span class="icon">
                                    <i class="icon fa fa-sign-out"></i>
                                </span>
                                <span class="text">Logout</span>
                            </span>
                        }
                    }
                    else
                    {
                        <a href="@Url.Action( "Login", "Account", new { Area = "Home" } )" class="login-button">
                            <span class="icon">
                                <i class="fa fa-sign-in"></i>
                            </span>
                            <span class="text">Login</span>
                        </a>
                    }
                    <a href="/" class="home-link">
                        <img src="/Images/Header/Logo.png" />
                    </a>
                    <ul id="menu" class="off">
                        @if ( UserSession.Current.IsLoggedIn && UserSession.Current.IsAdministrator )
                        { 
                            <li class="off">
                                <div class="nav-link">
                                    <a href="@Url.Action( "Index", "Home", new { Area = "Admin" } )">Admin</a>
                                </div>
                            </li>
                        }
                        <li class="off">
                            <div class="nav-link">
                                <a href="/">Home</a>
                            </div>
                        </li>
                        @foreach ( var menuItem in UserSession.Current.GetMenuItems() )
                        { 
                            <li class="off">
                                <div class="nav-link">
                                    <a href="@Url.Action( "Index", "Page", new { Area = "Home", pageId = menuItem.PageId } )">@menuItem.Title</a>
                                </div>
                            </li>
                        }
                        @*<li class="off">
                            <div class="nav-link">
                                <a href="@Url.Action( "Index", "Products", new { Area = "Shop" } )">Shop</a>
                            </div>
                        </li>*@
                        @*<li class="off">
                            <div class="nav-link">
                                <div class="fake-link" onclick="_site.contactForm.toggleForm();">Contact</div>
                                @*<a href="javascript:void(0);" onclick="_site.contactForm.toggleForm();">Contact</a>
                                @*Html.ActionLink("Contact", "Contact", "Home")
                            </div>
                            <div id="contactFormWrapper">
                                @using ( Ajax.BeginForm( "Contact", "Home", new AjaxOptions() { OnSuccess = "_site.contactForm.contactFormSubmitted" }, new { id = "contactForm" } ) )
                                {
                                    <dl>
                                        <dt>
                                            @Html.Label( "Your Name:" )
                                        </dt>
                                        <dd>
                                            @Html.TextBox( "FullName" )
                                        </dd>
                                        <dt>
                                            @Html.Label( "Message:" )
                                        </dt>
                                        <dd>
                                            @Html.TextArea( "Message", "" )
                                        </dd>
                                    </dl>
        
                                    <div class="button-wrapper">
                                        <input class="button primary" type="submit" title="Submit" />
                                    </div>
                                }
                            </div>
                        </li>*@
                    </ul>
                </div>
                <div class="copy-right content-wrapper text-center">
                    <p>&copy; @DateTime.Now.Year - Stephen Barnes</p>
                </div>
            </nav>
            <div class="menu-link">
                <span></span>
            </div>
        </header>
        <div class="page-content">
            @RenderSection( "overlays", false )
            @if ( string.IsNullOrEmpty( PageTitle ) == false )
            {
                <div class="page-header-wrapper">
                    <div class="page-header">
                        <h1>@PageTitle</h1>
                    </div>
                </div>
            }
            <div id="body" class="content-wrapper">
                <section class="main-content clear-fix">
                    <div class="page-content-wrapper">
                        <div class="page-content">
                            @RenderBody()
                        </div>
                    </div>
                </section>
            </div>
        </div>
        @RenderSection("scripts", required: false)
        <script>
            var _site;

            $(function ()
            {
                _site = new Site();
            });
        </script>
    </body>
</html>
